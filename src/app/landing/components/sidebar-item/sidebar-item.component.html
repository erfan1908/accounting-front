<div
  class="flex no-select cursor-pointer py-2 rounded-mdv "
  [routerLink]="'/landing/' + navItem.link"
  [ngClass]="{
    'py-0 pr-0 pl-0  size-10 gap-0 w-[40px] justify-center': sidebarMode,
    'pr-4 pl-1 gap-2': !sidebarMode,
    'bg-[#1F4D84] text-white hover:bg-[#1F4D84] ': router.url.includes(
      navItem.link
    ),
    'hover:bg-gray-200 text-[#535357]': !router.url.includes(navItem.link)
  }"
  *ngIf="!navItem.children || navItem.children.length === 0"
>
  <mat-icon>{{ navItem.icon }}</mat-icon>
  <span *ngIf="!sidebarMode" class="overflow-hidden whitespace-nowrap">
    {{ navItem.name }}
  </span>
</div>

<!-- آیتم با زیرمجموعه -->
<div *ngIf="navItem.children && navItem.children.length > 0">
  <div
    class="flex cursor-pointer py-2 rounded-md no-select"
    [ngClass]="[
      sidebarMode
        ? 'py-0 pr-0 pl-0 justify-center size-10 gap-0 w-[40px]'
        : 'pr-4 pl-1 gap-2 overflow-x-hidden justify-between ',
      isChildActive(navItem)
        ? 'bg-[#1F4D84] text-white'
        : 'hover:bg-gray-200 text-[#535357]'
    ]"
    (click)="toggleExpand(navItem)"
  >
    <div class="flex justify-center items-center no-select">
      <mat-icon>{{ navItem.icon }}</mat-icon>
      <span *ngIf="!sidebarMode" class="overflow-hidden whitespace-nowrap">
        {{ navItem.name }}
      </span>
    </div>

    <!-- فلش -->
    <div>
      <mat-icon
        class="ml-0 transition-transform duration-300"
        *ngIf="!sidebarMode"
        [ngClass]="{ 'rotate-180': expanded }"
      >
        expand_more
      </mat-icon>
    </div>
  </div>

  <!-- زیرمجموعه‌ها -->

<div
  class="flex flex-col no-select overflow-hidden transition-all duration-300 ease-in-out"
  [style.maxHeight]="expanded ? navItem.children.length * 48 + 'px' : '0px'"
>
  <a
    *ngFor="let child of navItem.children"
    [routerLink]="child.link"
    class="flex gap-2 pr-4 pl-1 py-2 hover:bg-gray-200 rounded-md no-select"
    [ngClass]="{
      'bg-[#E3E3E5] text-[#0A0A0A]': router.url.includes(child.link),
      'text-[#535357]': isOtherActive(child, navItem),
      'hover:bg-gray-200': !router.url.includes(child.link)
    }"
  >
    <mat-icon>{{ child.icon }}</mat-icon>
    <span class="overflow-hidden whitespace-nowrap">
      {{ child.name }}
    </span>
  </a>
</div>

</div>
